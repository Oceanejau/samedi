make re && valgrind --log-file=toto --leak-check=full --show-leak-kinds=all --track-origins=yes --suppressions=ignore_leak_rl ./minishell

LEAKSSSS


join
strdup
cut in

/bin/
exit
ctrl d






ERREURS 

echo -nnn chose
exit after commands echo
echo "txt"123
missing kote tout doit free

valeur de retour signaux
heredoc multiple
ajouter fonction pour expend dans le herdoc sans gestion de dollar


$HOME <<
devrait renvoyer une erreur

variable globale pour valeur de retour
built
compiler avec flags


				ret $?
jdfnglkjsf
DO END
jdfnglkjsf: No such file or directory
üêömimishellüêö $?
DO END
$?
tmp = 32512


touch toto remplir avec ls -la
./minishell > toto
a gerer



valgrind track fd -----------------------------------------------


git checkout master
git merge toto

munmap_chunk(): invalid pointer
ZSH: IOT instruction


"%123%#%abc%"

kote ouverte pb a fix


"%123%#&abc&"



üêömimishellüêö echo "<"">"' $USER$USER '"asda"'asda'"|"'adssa'"$USER"
devait renvoyer command not found

üêömimishellüêö echo $PWD_
==3827204== Argument 'size' of function malloc has a fishy (possibly negative) value: -4
==3827204==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==3827204==    by 0x403BC5: cut_from_pos (in /mnt/nfs/homes/ojauregu/Documents/koko/mini/minishell)
==3827204==    by 0x404D42: do_end (in /mnt/nfs/homes/ojauregu/Documents/koko/mini/minishell)
==3827204==    by 0x405820: repartiteur (in /mnt/nfs/homes/ojauregu/Documents/koko/mini/minishell)
==3827204==    by 0x405966: mani (in /mnt/nfs/homes/ojauregu/Documents/koko/mini/minishell)
==3827204==    by 0x40172F: main (in /mnt/nfs/homes/ojauregu/Documents/koko/mini/minishell)
==3827204==
showlist main
str prev echo
str = echo
fin list
$? a gerer shell->ret

echo $PATH

$USER$USER ----> segfault

echo '"$PATH"'"
Error: Mising kote -"-

DOUBLE RETOUR

EXEC

< Makefile cat // redir infile pas gere
<< heredoc pas gere.

üêömimishellüêö < Makefile cat
zsh: segmentation fault (core dumped)  ./minishell



EXIT
	ls | exit  //ne doit pas ecrire exit
	exit 5 5 // ecrit exit mais doit ecrire too many args sans quitter
	exit d 5 // doit ecrire bash: exit: d: numeric argument required && quitter
	exit 012345678901234567891231 // ecrit exit et dois renvoyer bash: exit: 5616516516516516516516516: numeric argument required && quitte


ENV
env -i ./minishell
$>:/mnt/nfs/homes/ojauregu$ env

PWD=/mnt/nfs/homes/ojauregu
SHLVL=1
_=/usr/bin/env


et non un env vide




cd sans arguments doit renvoyer a la racine

echo -nnnnnnnfd doit renvoyer -nnnnnnfd
echo -nnnnn -n salut renvoie pas le bon truc

ctrl + \ dans l'enfant (cat ) doit remvoyer Quit core dumped et quitte l'enfant

cat + ctrl C manque un \n pour le retour de minishell

fdhjfhsjdf --> devrait renvoyer command not found

| echo ---->devrait renvoyer une erreur genre "bash: syntax error near unexpected token `|'"

ls <> abc ---> renvoie un ls et cree un truc abc

$ ---> un \n en trop dans l'exec?


echo "<"">"'|'"asda"'asda'"|"'adssa'"<" ------> debut avec les <> porblematique?


make re && valgrind --leak-check=full --show-leak-kinds=all --suppressions=ignore_leak_rl ./minishell


	write dans une stack et push au dernier moment
	gere les return d'error sur sortie d'erreur
	modif tous les printfs


‚ùØ env-i bash --posix
zsh: command not found: env-i
‚ùØ ls
a.out  git  includes  key  Makefile  mimi.c  mini.h  mini_main.c  minishell  mini_url  new  srcs
‚ùØ env-i ./bash --posix
zsh: command not found: env-i
‚ùØ env -i bash --posix
bash-5.1$ env
PWD=/mnt/nfs/homes/ojauregu/Documents/mini_github
SHLVL=1
_=/usr/bin/env
bash-5.1$ unset _
bash-5.1$ env
PWD=/mnt/nfs/homes/ojauregu/Documents/mini_github
SHLVL=1
_=/usr/bin/env
bash-5.1$ unset SHLVL
bash-5.1$ env
PWD=/mnt/nfs/homes/ojauregu/Documents/mini_github
_=/usr/bin/env
bash-5.1$  cd ./././././
bash-5.1$ export sa=ls
bash-5.1$ $sa
Makefile  a.out  git  includes	key  mimi.c  mini.h  mini_main.c  mini_url  minishell  new  srcs
bash-5.1$ export bi="        e    e e e"
bash-5.1$ echo $bi
e e e e
bash-5.1$ $bi
bash: e: command not found
bash-5.1$ cat 
^\Quit (core dumped)
bash-5.1$ echo $?
131
bash-5.1$ cat    
^C
bash-5.1$ ecgo $?
bash: ecgo: command not found
bash-5.1$ cat    
^C
bash-5.1$ echo $?
130
bash-5.1$ cat    
bash-5.1$ echo $?
0

  =====SIGNAUX======
ctrl + c = SIGINT == newline vide retour 130
ctrl + \ = SIGQUIT 
ctrl + d = eof == return la derniere valeur ET quitte




=====Expend=====

$dsdasd|
$1asda
$sds1sadad


====Redirection====

> redirection de sortie, dans un fichier en ecrasant par defaut le contenu
< redirection d'entree, utilise le contenu dun fichier pour executer une action
| utilise la sortie d'un programme comme 'entree dun autre
>> redirige dans un fichier en fin de fichier


checker les $ avec les pipes
heredoc
return value (normalement ok mais pas s√ªr si signal)
verifier si fds sont ferm√© dans tout les cas d'erreurs (pour builtin et commande et commande invalide)
faire les correction pour compile avec les flags
